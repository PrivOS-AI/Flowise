import { IStage, IList, IItem } from './interface';

/**
 * Privos External API - Stage Management Endpoints
 *
 * Base URL: https://privos-dev-web.roxane.one/api/v1
 *
 * This module defines the Stage Management endpoints for the Privos external API.
 * Stages represent workflow steps or columns within lists where items can be organized.
 *
 * ## Endpoints Overview (/v1/external.stages.*)
 *
 * ### Stage Retrieval
 * - GET /byListId - Fetch all stages for a specific list
 *   Parameters: listId
 *   Returns: array of stages with item counts
 *
 * - GET /:stageId - Retrieve details for a specific stage
 *   Returns: stage info and item count
 *
 * - GET /items - Retrieve items within a stage
 *   Parameters: stageId, limit?
 *   Returns: stage name, items array, and count
 *
 * ### Stage Management
 * - POST /create - Create a new stage in a list
 *   Parameters: listId, name, color, order?
 *   Returns: created stage info
 *
 * - PUT /:stageId - Update stage properties
 *   Parameters: name?, color?
 *   Returns: confirmation with stage ID
 *
 * - DELETE /:stageId - Delete a stage
 *   Parameters: moveItemsToStageId? (to preserve items)
 *   Returns: confirmation message
 *
 * ### Stage Organization
 * - POST /reorder - Reorder stages within a list
 *   Parameters: listId, stageIds array (in desired order)
 *   Returns: confirmation message
 *
 * ## Stage Properties
 * - **Name**: Display name for the stage
 * - **Color**: Visual identifier (hex color code)
 * - **Order**: Position within the list (0-based)
 * - **Item Count**: Number of items in the stage
 *
 * ## Workflow Considerations
 * - Stages define the workflow states for items
 * - Items can be moved between stages to track progress
 * - Each stage has a unique color for visual distinction
 * - Stage order can be customized per list
 * - When deleting stages, items can be moved to another stage
 *
 * ## Template Support
 * - Stages can be created from templates using templateStageKey
 * - Template stages maintain consistency across similar lists
 */
interface STAGES_ENTPOINTS {
	'/v1/external.stages.byListId': {
		GET: (params: { listId: IList['_id'] }) => {
			stages: (IStage & { itemCount: number })[];
			count: number;
		};
	};
	'/v1/external.stages/:stageId': {
		GET: () => {
			stage: IStage;
			itemCount: number;
		};
		PUT: (params: { name?: string; color?: string }) => {
			message: string;
			stageId: IStage['_id'];
		};
		DELETE: (params: { moveItemsToStageId?: IStage['_id'] }) => {
			message: string;
		};
	};
	'/v1/external.stages.create': {
		POST: (params: { listId: IList['_id']; name: string; color: string; order?: number }) => {
			stage: Pick<IStage, '_id' | 'name' | 'listId' | 'order' | 'color'>;
		};
	};
	'/v1/external.stages.reorder': {
		POST: (params: { listId: IList['_id']; stageIds: IStage['_id'][] }) => {
			message: string;
		};
	};
	'/v1/external.stages.items': {
		GET: (params: { stageId: IStage['_id']; limit?: number }) => {
			stageId: IStage['_id'];
			stageName: string;
			items: Partial<IItem>[];
			count: number;
		};
	};
}
